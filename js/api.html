<script>
/**
 * ðŸ“¡ GLOBAL API UTILITY
 * Handles communication with the Google Apps Script backend.
 */
const API = {
    async call(endpoint, data = {}, token = null) {
        // Fallback to current script URL if CONFIG is not loaded
        const url = typeof CONFIG !== 'undefined' ? CONFIG.GAS_URL : 'https://script.google.com/a/macros/raveone.in/s/AKfycbxRbT8pfN42XeApgBt5UnkkhGRT4hVvnL6iDze1Qj5VlqxS0i95cLLT8150FniVccOM/exec';
        
        const options = {
            method: 'POST',
            body: JSON.stringify({
                endpoint,
                data,
                token
            })
        };
        
        try {
            const response = await fetch(url, options);
            if (!response.ok) throw new Error(`HTTP ${response.status}`);
            return await response.json();
        } catch (error) {
            console.error(`API Error [${endpoint}]:`, error);
            throw error;
        }
    }
};
</script>
